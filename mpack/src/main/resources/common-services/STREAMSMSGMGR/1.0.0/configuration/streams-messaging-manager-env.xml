<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<!--
  ~ HORTONWORKS DATAPLANE SERVICE AND ITS CONSTITUENT SERVICES
  ~
  ~ (c) 2016-2018 Hortonworks, Inc. All rights reserved.
  ~
  ~ This code is provided to you pursuant to your written agreement with Hortonworks, which may be the terms of the
  ~  Affero General Public License version 3 (AGPLv3), or pursuant to a written agreement with a third party authorized
  ~  to distribute this code.  If you do not have a written agreement with Hortonworks or with an authorized and
  ~  properly licensed third party, you do not have any rights to this code.
  ~
  ~  If this code is provided to you under the terms of the AGPLv3:
  ~  (A) HORTONWORKS PROVIDES THIS CODE TO YOU WITHOUT WARRANTIES OF ANY KIND;
  ~  (B) HORTONWORKS DISCLAIMS ANY AND ALL EXPRESS AND IMPLIED WARRANTIES WITH RESPECT TO THIS CODE, INCLUDING BUT NOT
  ~        LIMITED TO IMPLIED WARRANTIES OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE;
  ~  (C) HORTONWORKS IS NOT LIABLE TO YOU, AND WILL NOT DEFEND, INDEMNIFY, OR HOLD YOU HARMLESS FOR ANY CLAIMS ARISING
  ~       FROM OR RELATED TO THE CODE; AND
  ~  (D) WITH RESPECT TO YOUR EXERCISE OF ANY RIGHTS GRANTED TO YOU FOR THE CODE, HORTONWORKS IS NOT LIABLE FOR ANY
  ~        DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, PUNITIVE OR CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO,
  ~        DAMAGES RELATED TO LOST REVENUE, LOST PROFITS, LOSS OF INCOME, LOSS OF BUSINESS ADVANTAGE OR UNAVAILABILITY,
  ~        OR LOSS OR CORRUPTION OF DATA.
-->
<configuration supports_adding_forbidden="true">
  <property>
    <name>streams_messaging_manager_user</name>
    <display-name>Streams Messaging Manager User</display-name>
    <value>streamsmsgmgr</value>
    <property-type>USER</property-type>
    <description/>
    <value-attributes>
      <type>user</type>
      <overridable>false</overridable>
      <user-groups>
        <property>
          <type>cluster-env</type>
          <name>user_group</name>
        </property>
      </user-groups>
    </value-attributes>
    <on-ambari-upgrade add="false"/>
  </property>
  <property>
    <name>streams_messaging_manager_log_dir</name>
    <display-name>Streams Messaging Manager Log Dir</display-name>
    <value>/var/log/streams-messaging-manager</value>
    <description/>
    <on-ambari-upgrade add="false"/>
  </property>
  <property>
    <name>streams_messaging_manager_pid_dir</name>
    <value>/var/run/streams-messaging-manager</value>
    <display-name>Streams Messaging Manager PID dir</display-name>
    <description/>
    <value-attributes>
      <type>directory</type>
      <editable-only-at-install>true</editable-only-at-install>
      <overridable>false</overridable>
    </value-attributes>
    <on-ambari-upgrade add="false"/>
  </property>
  <property>
    <name>streams_messaging_manager_principal_name</name>
    <value>streams_messaging_manager</value>
    <display-name>Streams Messaging Manager Principal Name</display-name>
    <description/>
    <on-ambari-upgrade add="false"/>
  </property>

  <property>
    <name>streams_messaging_manager_user</name>
    <value>streamsmsgmgr</value>
    <property-type>USER</property-type>
    <display-name>Streams Messaging Manager User</display-name>
    <description>User of Streams Messaging Manager daemon runs as</description>
    <value-attributes>
            <type>user</type>
            <overridable>false</overridable>
            <user-groups>
                <property>
                    <type>streams-messaging-manager-env</type>
                    <name>streams_messaging_manager_group</name>
                </property>
            </user-groups>
        </value-attributes>
    <on-ambari-upgrade add="false"/>
  </property>
  <property>
    <name>streams_messaging_manager_group</name>
    <value>streamsmsgmgr</value>
    <property-type>GROUP</property-type>
    <display-name>Streams Messaging Manager Group</display-name>
    <description>Streams Messaging Manager group</description>
      <on-ambari-upgrade add="true"/>
  </property>

  <property>
    <name>streams_messaging_manager_user_nofile_limit</name>
    <display-name>Streams Messaging Manager User NoFile Limit</display-name>
    <value>65536</value>
    <description>Max open files limit setting for streamsmsgmgr user.</description>
    <on-ambari-upgrade add="false"/>
  </property>
  <property>
    <name>streams_messaging_manager_user_nproc_limit</name>
    <display-name>Streams Messaging Manager User NoProc Limit</display-name>
    <value>65536</value>
    <description>Max number of processes limit setting for streamsmsgmgr user.</description>
    <on-ambari-upgrade add="false"/>
  </property>

  <!-- streams-messaging-manager-env.sh -->
  <property>
    <name>content</name>
    <display-name>streams-messaging-manager-env template</display-name>
    <description>This is the jinja template for streams-messaging-manager-env.sh file</description>
    <value>
#!/bin/bash

# Set Streams Messaging Manager's specific environment variables here.

# The java implementation to use.
export JAVA_HOME={{jdk64_home}}
export PATH=$PATH:$JAVA_HOME/bin
export PID_DIR={{streams_messaging_manager_pid_dir}}
export LOG_DIR={{streams_messaging_manager_log_dir}}
export SMM_DIR={{streams_messaging_manager_current}}
export SMM_KERBEROS_OPTS={{streams_messaging_manager_kerberos_params}}
export HDFS_CLIENT_LIBS={{hdfs_client_libs}}
    </value>
    <value-attributes>
      <type>content</type>
    </value-attributes>n
    <on-ambari-upgrade add="true"/>
  </property>
</configuration>